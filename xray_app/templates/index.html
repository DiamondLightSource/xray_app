{% extends 'layout.html' %}
<head>
</head>
{% block body %}
<h1> Xraylib App </h1>
  
  <form method="POST" action="">  
    <fieldset class = "form-group">
       <!--
       possibly add headers or dividers to label diff functions i.e cross sections, misc, profiles, form factors
       would need an ordered list :?
       could also use bootstrap buttons to do radio bit then nest dropdown 
       -->
       {% for field in form %}
            {% if field.id == 'linetype' %}
                <div class = "form-group xlib" id = "{{field.id}}">
                    {{field.label}}:
                    {{field.trans_notation(class="radio-inline")}}
                    <br> 
                    {{field.trans_iupac}}
                    {{field.trans_siegbahn}}
                </div>
            {% elif field.id == 'csrf_token'%}
            {% elif field.id == 'function'%}
                <div class = "form-group" id = "{{field.id}}">
                    {{field.label}}:
                    {{field}}
                </div>
            {% elif field.id == 'examples' %}
                <div class = "form-group" id = "{{field.id}}" onchange="">
                    {{field.label}}:
                    {{field}}
                </div>
            {% elif field.type == 'SelectField' %}
                <div class = "form-group xlib" id = "{{field.id}}">
                    {{field.label}}:
                    {{field}}
                </div>
                <!--make field searchable-->
            {% else %}
                <div class = "form-group xlib" id = "{{field.id}}">
                    {{field.label}}: 
                    {{field}}
                </div>  
            {% endif %}  
       {% endfor %}
       <p></p>
       <input 
            type = "submit" 
            value = "Submit"
            formnovalidate>
        <br>
     </fieldset>
  </form>
  
{% if output is mapping %}
    <div class="table-responsive">  
        <table class="table">
            {% for key, value in output.items() %}
                <tr>
                    <th> {{ key }} </th>
                    <td> {{ value }} </td>
                </tr>
             {% endfor%}
        </table>
    </div>
{% else %} 
<h2> Result: </h2>
    <div id = "output">
        {{ output }}
    </div>
    <div id = "units">
    {% if units %}
        {{units|safe}}  
    {% endif %}
    </div>
{% endif %}

{% if error %}
           {{error}}
{% endif %} 

<h3> Code Example: </h3>
{% if code_examples %}
{{code_examples|safe}}
{% endif %}

<script
        src="https://code.jquery.com/jquery-3.3.1.js"
        integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
        crossorigin="anonymous">
</script>

<script
    src="{{url_for('static', filename='main.js')}}">
</script>

{% endblock body %}
