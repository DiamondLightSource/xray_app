{% extends 'layout.html' %}
<head>
</head>
{% block body %}
<h1> Xraylib App </h1>

<div>  
  <form method="POST" action="">  
    <fieldset class="form-group inline">
       <!--
       possibly add headers or dividers to label diff functions i.e cross sections, misc, profiles, form factors
       would need an ordered list :?
       could also use bootstrap buttons to do radio bit then nest dropdown 
       -->
       {% for field in form %}
            {% if field.id == 'linetype' %}
                <div class="form-group xlib" id = "{{field.id}}">
                    {{field.label}}:
                    {{field.trans_notation(class="radio-inline")}}
                    
                    {{field.trans_iupac(class="select-inline")}}
                    {{field.trans_siegbahn(class="select-inline")}}
                </div>
            {% elif field.id == 'csrf_token'%}
            {% elif field.id == 'function' or field.id == 'examples' %}
                <div class="form-group" id="{{field.id}}">
                    {{field.label}}:
                    {{field}}
                </div>
            {% elif field.type == 'SelectField' %}
                <div class="form-group xlib" id="{{field.id}}">
                    {{field.label}}:
                    {{field}}
                </div>
                <!--make field searchable-->
            {% else %}
                <div class="form-group xlib" id="{{field.id}}">
                    {{field.label}}: 
                    {{field}}
                </div>  
            {% endif %}  
       {% endfor %}
       <p></p>
       <input 
            type="submit" 
            value="Submit"
            formnovalidate>
        <br/>
     </fieldset>
  </form>
</div>  

{% if output is mapping %}
    <div class="table-responsive">  
        <table class="table">
            {% for item in output.items() %}
            {% endfor %}
            {% for key, value in output.items() %}
                <tr>
                    <th> {{ key }} </th>
                    <td> {{ value }} 
                    <div id="units">
                    {% if units %}
                        {{units|safe}}  
                    {% endif %}
                    </div></td>
                </tr>
            {% endfor%}
        </table>
    </div>
{% elif output %} 
<h2> Result: </h2>
    <div id="output">
        <p id="output"> {{ output|safe }} </p>
    </div>
    <div id="units">
    {% if units %}
        <p> {{units|safe}} </p>
    {% endif %}
    </div>
{% endif %}

{% if error %}
           {{error}}
{% endif %} 
{% if code_examples %}
    <h3> Code Example: </h3>
{{code_examples|safe}}
{% endif %}
<script
    src="https://code.jquery.com/jquery-3.3.1.js"
    integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
    crossorigin="anonymous"> </script>
<script src="{{url_for('static', filename='index.js')}}"></script>

<noscript>Sorry, your browser does not support JavaScript!</noscript>

{% endblock body %}
